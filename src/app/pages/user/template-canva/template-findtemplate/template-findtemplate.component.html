<div>
  <p-menubar>
    <ng-template pTemplate="start">
      <p class="menu-text">Tipo de terraza: {{ template.terraceTypeModel.kind }}</p>
    </ng-template>
    <ng-template pTemplate="end">
      <p-dropdown
      [options]="terraceTypes"
      optionLabel="kind"
      placeholder="cambiar tipo de terraza"
      >
      </p-dropdown>
    </ng-template>
  </p-menubar>

  <p-carousel
  [value]="terraces"
    [numVisible]="5"
    [numScroll]="1"
    [responsiveOptions]="responsiveOptions"
  >

    <ng-template pTemplate="item" let-terrace>
      <div class="p-2" (click)="openDialog(terrace)">
      <p-card [header]="terrace.name">
        <img
          [src]="terrace.URL_IMG[0]"
          alt="Imagen terraza"
          height="100px"
          (error)="onImageError($event)"
        />
        <p>{{ terrace.description }}</p>
        </p-card>
      </div>
    </ng-template>
  </p-carousel>

<p-dialog
  header="Detalles del servicio / terraza"
  [(visible)]="showDialog"
  [modal]="true"
  [style]="{ width: '70vw' }"
  [breakpoints]="{ '960px': '90vw', '640px': '100vw' }"
>

  <div *ngIf="selectedTTerrace && selectedRTerrace">
    <h3>{{ selectedTTerrace.name }}</h3>
  
  <p-carousel
  [value]="selectedTTerrace.URL_IMG"
  [numVisible]="1"
  [numScroll]="1"
  [circular]="true"
  [autoplayInterval]="5000"
  *ngIf="selectedTTerrace.URL_IMG.length > 0">
    <ng-template pTemplate="item" let-imgUrl>
      <div class="image-wrapper" style="text-align: center;">
        <img
          [src]="imgUrl"
          (error)="onImageError($event)"
          alt="Imagen terraza"
          width="10%"
          style="max-height: 200px; object-fit: cover;"
        />
      </div>
    </ng-template>
  </p-carousel>
<!-- Fallback si no hay imágenes -->
  <div *ngIf="!selectedTTerrace?.URL_IMG?.length" style="text-align: center; margin-top: 20px;">
    <img src="../../../assets/calendars.png" width="20%"/>
  </div>
    <p><strong>Descripción:</strong> {{ selectedTTerrace.description }}</p>
    <p><strong>Dirección:</strong> {{ selectedRTerrace.direction }}</p>
    <p><strong>Capacidad Base:</strong> {{ selectedRTerrace.baseSize }}</p>
    <p><strong>Capacidad Máxima:</strong> {{ selectedRTerrace.maxSize }}</p>
    <p><strong>Precio adicional por cada 10 personas:</strong> {{ selectedRTerrace.priceAdd10 }}</p>
    <p><strong>Precio base:</strong> {{ selectedRTerrace.price }}</p>
    <p><strong>Lugar:</strong> {{ selectedTTerrace.place }}</p>
    <p><strong>Ciudad:</strong> {{ selectedTTerrace.cityModel?.name }}</p>
    <p><strong>Tipo de terraza:</strong> {{ selectedTTerrace.terraceType?.[0]?.kind }}</p>

    <!-- Puedes añadir formularios aquí -->
    <div class="form-group">
      <label for="descripcion">Editar Descripción</label>
      <input
        type="text"
        pInputText
        [(ngModel)]="selectedTTerrace.description"
        id="descripcion"
      />
    </div>

    <button pButton type="button" label="Guardar" icon="pi pi-save" class="mt-3" (click)="saveChanges()"></button>
  </div>
</p-dialog>


</div>